<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>Clean Blog - Start Bootstrap Theme</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet"
          type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"
          rel="stylesheet" type="text/css"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/static/styles.css" rel="stylesheet"/>
</head>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', {'packages': ['bar']});
    google.charts.setOnLoadCallback(drawChart);

    date = {{ year }}
        in_counts = {{ in_count }}
            out_counts =
    {{ out_count }}

    var year = [];
    var in_count = [];
    var out_count = [];

    {% for one in date %}
        year.push('{{ one }}')
    {% endfor %}
    console.log(year)
    console.log(year.length)

    for (var i = 0; i < year.length; i++) {
        in_count.push(in_counts[i])
        out_count.push(out_counts[i])
    }

    console.log(in_count)
    console.log(out_count)


    function drawChart() {
        var datas = [['year', 'In_count', 'Out_count']]
        for (var j = 0; j < year.length; j++) {
            datas.push([year[j], in_count[j], out_count[j]])
        }
        var data = google.visualization.arrayToDataTable(datas);
        console.log(data)

        var options = {
            chart: {
                title: 'Cafe Open Status',
                subtitle: '',
            }
        };

        var chart = new google.charts.Bar(document.getElementById('columnchart_material'));

        chart.draw(data, google.charts.Bar.convertOptions(options));
    }

    google.charts.load('current', {'packages': ['line']});
    google.charts.setOnLoadCallback(drawChart2);

    function drawChart2() {
        var datas = [['year', 'In_count', 'Out_count']]
        for (var j = 0; j < year.length; j++) {
            datas.push([year[j], in_count[j], out_count[j]])
        }
        var data = google.visualization.arrayToDataTable(datas);
        console.log(data)

        var options = {
            chart: {
                title: 'Cafe Open Status',
                subtitle: '',
            }
        };

        var chart2 = new google.charts.Line(document.getElementById('columnchart_material2'));

        chart2.draw(data, google.charts.Line.convertOptions(options));
    }

    google.charts.load('current', {'packages': ['table']});
    google.charts.setOnLoadCallback(drawTable);

    function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Year');
        data.addColumn('number', 'Open');
        data.addColumn('number', 'Close');
        datas = []

        for (var j = 0; j < year.length; j++) {
            datas.push([year[j], in_count[j], out_count[j]])
        }
        console.log(datas)
        data.addRows(datas)

        var table = new google.visualization.Table(document.getElementById('table_div'));

        table.draw(data, {showRowNumber: true, width: 200, height: '100%'});
    }

    google.charts.load('current', {
        'packages': ['map'],
        'mapsApiKey': 'AIzaSyA8xeL4urGef52RBv-5blyg-PjI7Uh9Uf0'
    });
    google.charts.setOnLoadCallback(drawMap);

    function drawMap() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Address');
        data.addColumn('string', 'Location');

        data.addRows([
            ['서울특별시 영등포구 문래동 선유로9길 30', '청년취업사관학교 영등포캠퍼스']
        ]);
        var options = {
            mapType: 'styledMap',
            zoomLevel: 14,
            showTooltip: true,
            showInfoWindow: true,
            useMapTypeControl: false,
            // User will only be able to view/select custom styled maps.
            maps: {
                styledMap: {
                    name: 'Styled Map',
                }

            }
        };
        var map = new google.visualization.Map(document.getElementById('map_div'));

        map.draw(data, options);
    }
</script>
<body>
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-light" id="mainNav">
    <div class="container px-4 px-lg-5">
        <a class="navbar-brand" href="/main">SEOUL_CAFE</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ms-auto py-4 py-lg-0">
                <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="main/chart">카페현황</a></li>
                <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="about.html">창업예측</a></li>
                <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="post.html">향후예측</a></li>
                <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="contact.html">상권분석</a></li>
                <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="contact.html">게시판</a></li>
                <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" href="contact.html">로그인</a></li>
            </ul>
        </div>
    </div>
</nav>
<!-- Page Header-->
<header class="masthead" style="background-image: url('/static/img/home_bg.jpg')">
    <div class="container position-relative px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-7">
                <div class="site-heading">
                    <h1>CAFE STATUS</h1>
                    <span class="subheading">SSAC 3기 Project 1조</span>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Main Content-->
<div>
    <div id="columnchart_material" style="width: 1200px; height: 600px;"></div>
    <div id="columnchart_material2" style="width: 1200px; height: 600px;"></div>
    <div id="table_div" style="width: 100%; height: 100%;"></div><br>
    <div id="map_div" style="width: 800px; height: 300px;"></div>
</div>

<!-- Footer-->
<footer class="border-top">
    <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-7">
                <div class="small text-center text-muted fst-italic">Copyright &copy; SSAC 3기 Project 2021</div>
            </div>
        </div>
    </div>
</footer>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="/static/scripts.js"></script>
</body>
</html>
